{{template "base/head" .}}
<div class="repository polls">
	{{template "repo/header" .}}
	<div class="ui container">
		<div class="navbar">
{{/*			{{template "repo/poll/navbar" .}}*/}}
			{{if and (or .CanWriteIssues .CanWritePulls) (not .Repository.IsArchived)}}
				<div class="ui right">
					<a class="ui green button" href="{{$.Link}}/new">{{.i18n.Tr "repo.polls.new"}}</a>
				</div>
			{{end}}
		</div>
		<div class="ui divider"></div>
		{{template "base/alert" .}}
		<div class="poll list">
			{{range .Polls}}
				<li class="item">
					{{svg "octicon-law" 16}} <a href="{{$.RepoLink}}/polls/{{.ID}}">{{.Subject}}</a>
{{/*					<div class="ui right green progress" data-percent="{{.Completeness}}">*/}}
{{/*						<div class="bar" {{if not .Completeness}}style="background-color: transparent"{{end}}>*/}}
{{/*							<div class="progress"></div>*/}}
{{/*						</div>*/}}
{{/*					</div>*/}}
{{/*					<div class="meta">*/}}
{{/*						{{ $closedDate:= TimeSinceUnix .ClosedDateUnix $.Lang }}*/}}
{{/*						{{if .IsClosed}}*/}}
{{/*							{{svg "octicon-clock" 16}} {{$.i18n.Tr "repo.milestones.closed" $closedDate|Str2html}}*/}}
{{/*						{{else}}*/}}
{{/*							{{svg "octicon-calendar" 16}}*/}}
{{/*							{{if .DeadlineString}}*/}}
{{/*								<span {{if .IsOverdue}}class="overdue"{{end}}>{{.DeadlineString}}</span>*/}}
{{/*							{{else}}*/}}
{{/*								{{$.i18n.Tr "repo.milestones.no_due_date"}}*/}}
{{/*							{{end}}*/}}
{{/*						{{end}}*/}}
{{/*						<span class="issue-stats">*/}}
{{/*							{{svg "octicon-issue-opened" 16}} {{$.i18n.Tr "repo.issues.open_tab" .NumOpenIssues}}*/}}
{{/*							{{svg "octicon-issue-closed" 16}} {{$.i18n.Tr "repo.issues.close_tab" .NumClosedIssues}}*/}}
{{/*							{{if .TotalTrackedTime}}{{svg "octicon-clock" 16}} {{.TotalTrackedTime|Sec2Time}}{{end}}*/}}
{{/*						</span>*/}}
{{/*					</div>*/}}
					{{if and (or $.CanWriteIssues $.CanWritePulls) (not $.Repository.IsArchived)}}
						<div class="ui right operate">
							<a href="{{$.Link}}/{{.ID}}/edit" data-id={{.ID}} data-title={{.Subject}}>{{svg "octicon-pencil" 16}} {{$.i18n.Tr "repo.polls.operate.edit"}}</a>
{{/*							{{if .IsClosed}}*/}}
{{/*								<a class="link-action" href data-url="{{$.Link}}/{{.ID}}/open">{{svg "octicon-check" 16}} {{$.i18n.Tr "repo.milestones.open"}}</a>*/}}
{{/*							{{else}}*/}}
{{/*								<a class="link-action" href data-url="{{$.Link}}/{{.ID}}/close">{{svg "octicon-x" 16}} {{$.i18n.Tr "repo.milestones.close"}}</a>*/}}
{{/*							{{end}}*/}}
							{{/* href is empty on purpose ; people without js don't want to delete by misclick. */}}
							{{/* there might also be a DELETE HTTP Method lurking around, or is it API only? */}}
							<a class="delete-button" href="#" data-url="{{$.Link}}/{{.ID}}/delete" data-id="{{.ID}}">{{svg "octicon-trashcan" 16}} {{$.i18n.Tr "repo.polls.operate.delete"}}</a>
						</div>
					{{end}}
					{{if .Description}}
						<div class="content">
							{{.RenderedDescription|Str2html}}
						</div>
					{{end}}
				</li>
			{{end}}

			{{template "base/paginate" .}}
		</div>
	</div>
</div>

{{if or .CanWriteIssues .CanWritePulls}}
	<div class="ui small basic delete modal">
		<div class="ui icon header">
			<i class="trash icon"></i>
			{{.i18n.Tr "repo.polls.modal.deletion.header"}}
		</div>
		<div class="content">
			<p>{{.i18n.Tr "repo.polls.modal.deletion.description"}}</p>
		</div>
		<div class="actions">
			<div class="ui red basic inverted cancel button">
				<i class="remove icon"></i>
				{{.i18n.Tr "modal.no"}}
			</div>
			<div class="ui green basic inverted ok button">
				<i class="checkmark icon"></i>
				{{.i18n.Tr "modal.yes"}}
			</div>
		</div>
	</div>
{{end}}
{{template "base/footer" .}}
